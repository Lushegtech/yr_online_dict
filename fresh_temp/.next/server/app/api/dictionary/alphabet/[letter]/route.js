"use strict";(()=>{var e={};e.id=595,e.ids=[595],e.modules={1708:e=>{e.exports=require("node:process")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{e.exports=require("node:tty")},7177:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>u,serverHooks:()=>w,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>c});var a={};r.r(a),r.d(a,{GET:()=>d});var s=r(30781),i=r(60554),n=r(31625),o=r(96396),l=r(25366);async function d(e,t){try{let r=(await t.params).letter,{searchParams:a}=new URL(e.url),s=a.get("page")?parseInt(a.get("page")):1,i=a.get("limit")?parseInt(a.get("limit")):50;if(console.log(`[API] Getting words for alphabet: ${r}, page: ${s}, limit: ${i}`),!r)return o.NextResponse.json({error:"Letter parameter is required"},{status:400});let n=await l.A.getWordsByAlphabet(r.toLowerCase(),s,i);if(!n)return console.log(`[API] Invalid alphabet letter: ${r}`),o.NextResponse.json({error:"Invalid alphabet letter"},{status:404});return console.log(`[API] Found ${n.words.length} words for alphabet: ${r}`),o.NextResponse.json(n)}catch(e){return console.error("Get alphabet words error:",e),o.NextResponse.json({error:"Failed to get words for the alphabet"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/dictionary/alphabet/[letter]/route",pathname:"/api/dictionary/alphabet/[letter]",filename:"route",bundlePath:"app/api/dictionary/alphabet/[letter]/route"},resolvedPagePath:"C:\\Users\\adebi\\Desktop\\yr_online_dict\\yr_online_dict\\fresh_temp\\src\\app\\api\\dictionary\\alphabet\\[letter]\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:p,workUnitAsyncStorage:c,serverHooks:w}=u;function h(){return(0,n.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:c})}},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{e.exports=require("node:async_hooks")},25366:(e,t,r)=>{r.d(t,{A:()=>i,K:()=>s});var a=r(18601);let s={async searchWords({query:e,page:t=1,limit:r=20,includeExamples:s=!0}){let i=e.toLowerCase().normalize("NFD"),n=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),o=[...await a.A.word.findMany({where:{OR:[{word:{equals:e,mode:"insensitive"}},{word:{equals:i,mode:"insensitive"}},{word:{equals:n,mode:"insensitive"}},{word:{startsWith:e,mode:"insensitive"}},{word:{startsWith:i,mode:"insensitive"}},{word:{startsWith:n,mode:"insensitive"}},{word:{contains:e,mode:"insensitive"}},{word:{contains:i,mode:"insensitive"}},{word:{contains:n,mode:"insensitive"}},{translations:{some:{text:{equals:e,mode:"insensitive"}}}},{translations:{some:{text:{startsWith:e,mode:"insensitive"}}}},{translations:{some:{text:{contains:e,mode:"insensitive"}}}}]},include:{translations:!0,examples:!!s&&{take:5},alphabet:!0},orderBy:{word:"asc"},skip:(t-1)*r,take:3*r})].sort((t,r)=>{let a=t.word.toLowerCase(),s=r.word.toLowerCase(),i=e.toLowerCase();if(a===i&&s!==i)return -1;if(a!==i&&s===i)return 1;let n=a.normalize("NFD"),o=s.normalize("NFD"),l=i.normalize("NFD");if(n===l&&o!==l)return -1;if(n!==l&&o===l)return 1;let d=n.replace(/[\u0300-\u036f]/g,""),u=o.replace(/[\u0300-\u036f]/g,""),p=l.replace(/[\u0300-\u036f]/g,"");if(d===p&&u!==p)return -1;if(d!==p&&u===p)return 1;let c=a.startsWith(i),w=s.startsWith(i);if(c&&!w)return -1;if(!c&&w)return 1;let h=n.startsWith(l),m=o.startsWith(l);if(h&&!m)return -1;if(!h&&m)return 1;let f=d.startsWith(p),x=u.startsWith(p);if(f&&!x)return -1;if(!f&&x)return 1;let g=t.translations.some(e=>e.text.toLowerCase()===i),y=r.translations.some(e=>e.text.toLowerCase()===i);if(g&&!y)return -1;if(!g&&y)return 1;let v=t.translations.some(e=>e.text.toLowerCase().startsWith(i)),A=r.translations.some(e=>e.text.toLowerCase().startsWith(i));if(v&&!A)return -1;if(!v&&A)return 1;let q=t.translations.some(e=>e.text.toLowerCase().includes(i)),b=r.translations.some(e=>e.text.toLowerCase().includes(i));if(q&&!b)return -1;if(!q&&b)return 1;let k=a.includes(i),C=s.includes(i);if(k&&!C)return -1;if(!k&&C)return 1;let F=n.includes(l),W=o.includes(l);if(F&&!W)return -1;if(!F&&W)return 1;let L=d.includes(p),R=u.includes(p);return L&&!R?-1:!L&&R?1:a.localeCompare(s)}).slice(0,r),l=await a.A.word.count({where:{OR:[{word:{contains:e,mode:"insensitive"}},{word:{contains:i,mode:"insensitive"}},{word:{contains:n,mode:"insensitive"}},{translations:{some:{text:{contains:e,mode:"insensitive"}}}}]}});return{words:o,pagination:{total:l,page:t,limit:r,totalPages:Math.ceil(l/r)}}},getWordById:async e=>await a.A.word.findUnique({where:{id:e},include:{translations:!0,examples:!0,alphabet:!0}}),async getWordsByAlphabet(e,t=1,r=50){let s=await a.A.alphabet.findUnique({where:{letter:e}});if(!s)return null;let i=await a.A.word.findMany({where:{alphabetId:s.id},include:{translations:!0},orderBy:{word:"asc"},skip:(t-1)*r,take:r}),n=await a.A.word.count({where:{alphabetId:s.id}});return{alphabet:s,words:i,pagination:{total:n,page:t,limit:r,totalPages:Math.ceil(n/r)}}},async getWordOfTheDay(){let e=new Date;e.setHours(0,0,0,0);let t=await a.A.featured.findFirst({where:{startDate:{lte:e},OR:[{endDate:{gte:e}},{endDate:null}]},include:{word:{include:{translations:!0,examples:{take:2}}}},orderBy:{startDate:"desc"}});return t?.word?t.word:await a.A.word.findFirst({where:{translations:{some:{}}},include:{translations:!0,examples:{take:2}},skip:Math.floor(100*Math.random())})},async getAllAlphabets(){let e=await a.A.alphabet.findMany({orderBy:{letter:"asc"}});return await Promise.all(e.map(async e=>{let t=await a.A.word.count({where:{alphabetId:e.id}});return{id:e.id,letter:e.letter,wordCount:t}}))},async getRandomCulturalFact(){let e=Math.floor(Math.random()*await a.A.culturalFact.count({where:{isActive:!0}}));return await a.A.culturalFact.findFirst({where:{isActive:!0},skip:e})},getAllCulturalFacts:async()=>await a.A.culturalFact.findMany({where:{isActive:!0},orderBy:{createdAt:"desc"}})},i=s},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{e.exports=require("node:child_process")},33873:e=>{e.exports=require("path")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{e.exports=require("node:os")},51455:e=>{e.exports=require("node:fs/promises")},57975:e=>{e.exports=require("node:util")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{e.exports=require("node:fs")},76760:e=>{e.exports=require("node:path")},77598:e=>{e.exports=require("node:crypto")},78474:e=>{e.exports=require("node:events")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[683,146,329],()=>r(7177));module.exports=a})();