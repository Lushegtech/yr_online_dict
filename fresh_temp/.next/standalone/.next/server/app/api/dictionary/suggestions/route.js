"use strict";(()=>{var e={};e.id=940,e.ids=[940],e.modules={1708:e=>{e.exports=require("node:process")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{e.exports=require("node:tty")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{e.exports=require("node:async_hooks")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{e.exports=require("node:child_process")},33873:e=>{e.exports=require("path")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{e.exports=require("node:os")},51455:e=>{e.exports=require("node:fs/promises")},57975:e=>{e.exports=require("node:util")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{e.exports=require("node:fs")},76760:e=>{e.exports=require("node:path")},77598:e=>{e.exports=require("node:crypto")},78474:e=>{e.exports=require("node:events")},93281:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>u,serverHooks:()=>g,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{GET:()=>p});var o=r(30781),n=r(60554),i=r(31625),a=r(96396),d=r(18601);function l(e,t){let r=[];for(let e=0;e<=t.length;e++)r[e]=[e];for(let t=0;t<=e.length;t++)r[0][t]=t;for(let s=1;s<=t.length;s++)for(let o=1;o<=e.length;o++)t.charAt(s-1)===e.charAt(o-1)?r[s][o]=r[s-1][o-1]:r[s][o]=Math.min(r[s-1][o-1]+1,r[s][o-1]+1,r[s-1][o]+1);return r[t.length][e.length]}async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("q"),s=t.get("limit")?parseInt(t.get("limit")):5,o="true"===t.get("detailed");if(!r||r.length<2)return a.NextResponse.json({suggestions:[]});let n=r.toLowerCase().normalize("NFD"),i=r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");console.log(`[API] Getting suggestions for: "${r}" (normalized: "${n}", basic: "${i}")`);let p=await d.A.word.findMany({where:{OR:[{word:{equals:r,mode:"insensitive"}},{word:{equals:n,mode:"insensitive"}},{word:{equals:i,mode:"insensitive"}},{word:{startsWith:r,mode:"insensitive"}},{word:{startsWith:n,mode:"insensitive"}},{word:{startsWith:i,mode:"insensitive"}},{translations:{some:{text:{equals:r,mode:"insensitive"}}}}]},orderBy:[{word:"asc"}],take:2*s,select:{id:!0,word:!0,partOfSpeech:!0,...o?{translations:{take:1,select:{text:!0,partOfSpeech:!0}}}:{}}}),u=[];if(p.length<2*s){let e=2*s-p.length;u=await d.A.word.findMany({where:{AND:[{NOT:{id:{in:p.map(e=>e.id)}}},{OR:[{word:{contains:r,mode:"insensitive"}},{word:{contains:n,mode:"insensitive"}},{word:{contains:i,mode:"insensitive"}},{translations:{some:{text:{contains:r,mode:"insensitive"}}}}]}]},orderBy:[{word:"asc"}],take:e,select:{id:!0,word:!0,partOfSpeech:!0,...o?{translations:{take:1,select:{text:!0,partOfSpeech:!0}}}:{}}})}let c=[...p,...u];if(o){let e=c.map(e=>({id:e.id,word:e.word,partOfSpeech:e.partOfSpeech||(e.translations&&e.translations.length>0?e.translations[0].partOfSpeech:void 0),translation:e.translations&&e.translations.length>0?e.translations[0].text:void 0})).map(e=>{let t=e.word.toLowerCase(),s=t.normalize("NFD"),o=s.replace(/[\u0300-\u036f]/g,""),a=0;if(t===r.toLowerCase()&&(a+=100),s===n&&(a+=90),o===i&&(a+=80),t.startsWith(r.toLowerCase())&&(a+=70),s.startsWith(n)&&(a+=60),o.startsWith(i)&&(a+=50),t.includes(r.toLowerCase())&&(a+=40),s.includes(n)&&(a+=30),o.includes(i)&&(a+=20),e.translation&&e.translation.toLowerCase().includes(r.toLowerCase())&&(a+=15),a>0){let e=Math.min(l(t,r.toLowerCase()),l(s,n),l(o,i)),d=Math.max(t.length,r.length);a+=10*(1-e/d)}return{...e,score:a}});e.sort((e,t)=>t.score-e.score);let t=[],o=new Set;for(let r of e){let e=r.word.toLowerCase();if(!o.has(e)){let{score:s,...n}=r;t.push(n),o.add(e)}}return a.NextResponse.json({suggestions:t.slice(0,s)})}{let e=c.map(e=>{let t=e.word.toLowerCase(),s=t.normalize("NFD"),o=s.replace(/[\u0300-\u036f]/g,""),a=0;if(t===r.toLowerCase()&&(a+=100),s===n&&(a+=90),o===i&&(a+=80),t.startsWith(r.toLowerCase())&&(a+=70),s.startsWith(n)&&(a+=60),o.startsWith(i)&&(a+=50),t.includes(r.toLowerCase())&&(a+=40),s.includes(n)&&(a+=30),o.includes(i)&&(a+=20),a>0){let e=Math.min(l(t,r.toLowerCase()),l(s,n),l(o,i)),d=Math.max(t.length,r.length);a+=10*(1-e/d)}return{word:e.word,score:a}});e.sort((e,t)=>t.score-e.score);let t=[],o=new Set;for(let r of e){let e=r.word.toLowerCase();o.has(e)||(t.push(r.word),o.add(e))}return a.NextResponse.json({suggestions:t.slice(0,s)})}}catch(e){return console.error("Suggestions error:",e),a.NextResponse.json({error:"Failed to get suggestions"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/dictionary/suggestions/route",pathname:"/api/dictionary/suggestions",filename:"route",bundlePath:"app/api/dictionary/suggestions/route"},resolvedPagePath:"C:\\Users\\adebi\\Desktop\\yr_online_dict\\yr_online_dict\\fresh_temp\\src\\app\\api\\dictionary\\suggestions\\route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:c,workUnitAsyncStorage:h,serverHooks:g}=u;function w(){return(0,i.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:h})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[683,146,329],()=>r(93281));module.exports=s})();